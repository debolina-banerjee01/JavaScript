<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      A girl is walking along an apple orchard with a bag in each hand. She
      likes to pick apples from each tree as she goes along, but is meticulous
      about not putting different kinds of apples in the same bag. Given an
      input describing the types of apples she will pass on her path, in order,
      determine the length of the longest portion of her path that consists of
      just two types of apple trees.
    </title>
  </head>
  <body>
    <script>
      function longestTwoTypes(apples) {
        let left = 0;
        let maxLen = 0;
        let map = new Map();

        for (let right = 0; right < apples.length; right++) {
          const fruit = apples[right];
          map.set(fruit, (map.get(fruit) || 0) + 1);

          // If more than 2 types, shrink from left
          while (map.size > 2) {
            const leftFruit = apples[left];
            map.set(leftFruit, map.get(leftFruit) - 1);
            if (map.get(leftFruit) === 0) {
              map.delete(leftFruit);
            }
            left++;
          }

          maxLen = Math.max(maxLen, right - left + 1);
        }

        return maxLen;
      }

      // Example usage:
      console.log(longestTwoTypes([2, 1, 2, 3, 3, 1, 3, 5])); // Output: 4
    </script>
  </body>
</html>
