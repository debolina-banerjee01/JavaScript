<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      You have N stones in a row, and would like to create from them a pyramid.
      This pyramid should be constructed such that the height of each stone
      increases by one until reaching the tallest stone, after which the heights
      decrease by one. In addition, the start and end stones of the pyramid
      should each be one stone high. You can change the height of any stone by
      paying a cost of 1 unit to lower its height by 1, as many times as
      necessary. Given this information, determine the lowest cost method to
      produce this pyramid.
    </title>
  </head>
  <body>
    <script>
      function minCostToBuildPyramid(stones) {
        const n = stones.length;
        const left = Array(n).fill(0);
        const right = Array(n).fill(0);

        // Left pass
        left[0] = Math.min(stones[0], 1);
        for (let i = 1; i < n; i++) {
          left[i] = Math.min(stones[i], left[i - 1] + 1);
        }

        // Right pass
        right[n - 1] = Math.min(stones[n - 1], 1);
        for (let i = n - 2; i >= 0; i--) {
          right[i] = Math.min(stones[i], right[i + 1] + 1);
        }

        let minCost = Infinity;

        // Try each index as peak
        for (let peakIdx = 0; peakIdx < n; peakIdx++) {
          const peakHeight = Math.min(left[peakIdx], right[peakIdx]);
          let cost = 0;

          // Build pyramid heights and compute cost
          for (let i = 0; i < n; i++) {
            const desiredHeight = Math.max(
              0,
              peakHeight - Math.abs(i - peakIdx)
            );
            cost += stones[i] - Math.min(stones[i], desiredHeight);
          }

          minCost = Math.min(minCost, cost);
        }

        return minCost;
      }
      const stones = [1, 1, 3, 3, 2, 1];
      console.log(minCostToBuildPyramid(stones)); // 2
    </script>
  </body>
</html>
