<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Given a positive integer N, find the smallest number of steps it will take
      to reach 1. There are two kinds of permitted steps: You may decrement N to
      N - 1. If a * b = N, you may decrement N to the larger of a and b.
    </title>
  </head>
  <body>
    <script>
      // Bottom-up DP
      function minStepsDP(N) {
        if (N <= 1) return 0;
        const dp = new Array(N + 1).fill(Infinity);
        dp[1] = 0;

        for (let n = 2; n <= N; n++) {
          // decrement option
          dp[n] = 1 + dp[n - 1];

          // factor option: try all factors up to sqrt(n)
          for (let i = 2; i * i <= n; i++) {
            if (n % i === 0) {
              const a = i;
              const b = n / i;
              const larger = Math.max(a, b);
              dp[n] = Math.min(dp[n], 1 + dp[larger]);
            }
          }
        }

        return dp[N];
      }

      // Example
      console.log(minStepsDP(100)); // 5
    </script>
  </body>
</html>
